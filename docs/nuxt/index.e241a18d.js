import{a as S,b as U,r as u,o as N,e as W,f as o,w as y,v as D,t as w,h as j,i as P}from"./entry.a77282f6.js";const k={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},E=o("p",{class:"text-lg text-gray-300"},"Lamp Display Emulator by KK",-1),G=o("a",{class:"mb-5 text-xs text-blue-400 underline",href:"https://github.com/KK-mp4/Lamp-Display-Emulator#readme",target:"_blank",rel:"noopener noreferrer"},"More info in GitHub",-1),L={class:"flex flex-wrap flex-row justify-center"},V={class:"w-[300px] mb-5"},K=o("p",{class:"mb-1 text-sm text-gray-300"},"Lamp texture resolution:",-1),F=P('<option value="1x1">1x1</option><option value="2x2">2x2</option><option value="4x4">4x4</option><option value="8x8">8x8</option><option value="16x16">16x16</option>',5),H=[F],M={class:"mb-1 text-sm text-gray-300"},$={class:"w-[300px] mb-5"},z=o("p",{class:"mb-1 text-sm text-gray-300"},"Dithering algorithm:",-1),A=P('<option value="None">None</option><option value="Random noise">Random noise WIP</option><option value="Bayer 2x2">Bayer 2x2 WIP</option><option value="Bayer 4x4">Bayer 4x4 WIP</option><option value="Bayer 8x8">Bayer 8x8 WIP</option><option value="Floyd-Steinberg">Floyd-Steinberg WIP</option>',6),O=[A],T={class:"block mb-2 text-sm font-medium text-gray-300"},J={class:"w-full h-full flex justify-center",style:{"image-rendering":"pixelated"}},q=["src"],Z=S({__name:"index",setup(Q){U({title:"Generator"});const l=u("16x16"),_=u("");let a=16;const n=u(512);let c;const b=u("None"),p=u(128);async function I(){const i=Date.now(),e=new Image;e.src=c,await new Promise(s=>{e.onload=()=>s(1)});let t=e.width,r=e.height;t>n.value&&(t=n.value),r>n.value&&(r=n.value);const x=document.createElement("canvas");x.width=t,x.height=r;const B=x.getContext("2d");B.drawImage(e,0,0,e.width,e.height);const v=new Image;v.src="./"+l.value+"/redstone_lamp_off.png",await new Promise(s=>{v.onload=()=>s(1)});const f=new Image;f.src="./"+l.value+"/redstone_lamp_on.png",await new Promise(s=>{f.onload=()=>s(1)});const g=document.createElement("canvas");g.width=t*a,g.height=r*a;const C=g.getContext("2d");for(let s=0;s<r;s++)for(let d=0;d<t;d++){const h=B.getImageData(d,s,1,1).data;.2126*h[0]+.7152*h[1]+.0722*h[2]>=p.value?C.drawImage(f,d*a,s*a):C.drawImage(v,d*a,s*a)}_.value=g.toDataURL(),console.log(Date.now()-i+"ms - Calculation time")}async function R(i){if(i.target.files&&i.target.files[0]){let e=new FileReader;e.readAsDataURL(i.target.files[0]),e.onload=t=>{c=t.target.result,I()}}}async function m(){l.value==="1x1"?(a=1,n.value=8192):l.value==="2x2"?(a=2,n.value=4096):l.value==="4x4"?(a=4,n.value=2048):l.value==="8x8"?(a=8,n.value=1024):(a=16,n.value=512),c&&I()}return(i,e)=>(N(),W("div",k,[E,G,o("div",L,[o("div",V,[K,y(o("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:e[1]||(e[1]=t=>m())},H,544),[[D,l.value]]),o("p",M,"PNG or JPG ("+w(n.value)+"x"+w(n.value)+"px max)",1),o("input",{class:"block w-[90%] text-sm text-gray-400 rounded-lg border cursor-pointer focus:outline-none bg-gray-700 border-gray-600 placeholder-gray-400",type:"file",accept:".png, .jpg",onChange:e[2]||(e[2]=t=>R(t))},null,32)]),o("div",$,[z,y(o("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>b.value=t),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:e[4]||(e[4]=t=>m())},O,544),[[D,b.value]]),o("label",T,"Threshold: "+w(p.value),1),y(o("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>p.value=t),type:"range",min:"0",max:"255",class:"w-[90%] h-2 rounded-lg appearance-none cursor-pointer bg-gray-700",onChange:e[6]||(e[6]=t=>m())},null,544),[[j,p.value]])])]),o("div",J,[o("img",{src:_.value,class:"w-[75%]"},null,8,q)])]))}});export{Z as default};
