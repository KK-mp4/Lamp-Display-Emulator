import{a as V,b as J,r as h,o as C,e as L,f as n,w as B,v as M,t as D,h as K,u as H,i as T,j as W}from"./entry.3f7ec4a0.js";const $=""+globalThis.__publicAssetsURL("load.png"),z={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},O=n("p",{class:"text-lg text-gray-300"},"Lamp Display Emulator by KK",-1),q=n("a",{class:"text-xs text-blue-400 underline",href:"https://github.com/KK-mp4/Lamp-Display-Emulator#readme",target:"_blank",rel:"noopener noreferrer"},"More info in GitHub",-1),Q=n("a",{class:"mb-5 text-xs text-blue-400 underline",href:"https://kk-mp4.github.io/RGB-Lamp-Display-Emulator/",target:"_blank",rel:"noopener noreferrer"},"RGB version",-1),X={class:"flex flex-wrap flex-row justify-center"},Y={class:"w-[300px] mb-5"},Z=n("p",{class:"mb-1 text-sm text-gray-300"},"Lamp texture resolution:",-1),ee=W('<option value="1x1">1x1</option><option value="2x2">2x2</option><option value="4x4">4x4</option><option value="8x8">8x8</option><option value="16x16">16x16</option><option value="32x32">32x32</option>',6),te=[ee],oe={class:"mb-1 text-sm text-gray-300"},ae={class:"w-[300px] mb-5"},ne=n("p",{class:"mb-1 text-sm text-gray-300"},"Dithering algorithm:",-1),se=W('<option value="None">None</option><option value="Random noise">Random noise</option><option value="Bayer 2x2">Bayer 2x2</option><option value="Bayer 4x4">Bayer 4x4</option><option value="Bayer 8x8">Bayer 8x8</option><option value="Blue noise">Blue noise WIP</option><option value="Riemersma">Riemersma WIP</option><option value="Floyd-Steinberg">Floyd-Steinberg WIP</option><option value="Jarvis-Judice-Ninke">Jarvis-Judice-Ninke WIP</option><option value="Atkinson">Atkinson WIP</option><option value="Stucki">Stucki WIP</option><option value="Burkes">Burkes WIP</option><option value="Sierra">Sierra WIP</option><option value="Sierra 2-lines">Sierra 2-lines WIP</option><option value="Sierra Lite">Sierra Lite WIP</option><option value="Stevenson-Arce">Stevenson-Arce WIP</option>',16),le=[se],ie={class:"block mb-2 text-sm font-medium text-gray-300"},re={key:0,class:"animate-spin h-7 w-7 top-52 absolute",src:$},ce={class:"w-full h-full flex justify-center",style:{"image-rendering":"pixelated"}},ue=["src"],me=V({__name:"index",setup(de){J({title:"Generator"});const u=h("16x16"),k=h("");let i=16;const r=h(512);let g;const w=h("None"),p=h(128);let y=h(!1),f=document.createElement("canvas");f.width=16,f.height=16;let R=f.getContext("2d");async function S(){const t=Date.now();y.value=!0,j();const o=new Image;o.src=g,await new Promise(a=>{o.onload=()=>a(1)});let e=o.width,s=o.height;e>r.value&&(e=r.value),s>r.value&&(s=r.value);const c=document.createElement("canvas");c.width=e,c.height=s;const l=c.getContext("2d",{willReadFrequently:!0});l.drawImage(o,0,0,o.width,o.height);const v=l.getImageData(0,0,e,s);switch(w.value){case"None":break;case"Random noise":{const a=E(v);l.putImageData(a,0,0);break}case"Bayer 2x2":{const a=N(v);l.putImageData(a,0,0);break}case"Bayer 4x4":{const a=A(v);l.putImageData(a,0,0);break}case"Bayer 8x8":{const a=U(v);l.putImageData(a,0,0);break}}const d=new Image;d.src="./"+u.value+"/redstone_lamp_off.png",await new Promise(a=>{d.onload=()=>a(1)});const _=new Image;_.src="./"+u.value+"/redstone_lamp_on.png",await new Promise(a=>{_.onload=()=>a(1)});const x=document.createElement("canvas");x.width=e*i,x.height=s*i;const P=x.getContext("2d"),I=l.getImageData(0,0,e,s);for(let a=0;a<s;a++)for(let m=0;m<e;m++).2126*I.data[(a*e+m)*4]+.7152*I.data[(a*e+m)*4+1]+.0722*I.data[(a*e+m)*4+2]>=p.value?P.drawImage(_,m*i,a*i):P.drawImage(d,m*i,a*i);k.value=x.toDataURL(),y.value=!1,F(),console.log(Date.now()-t+"ms - Calculation time")}function N(t){const o=[[0,127],[192,63]];for(let e=0;e<t.data.length;e+=4){const s=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,c=e/4%t.width,l=Math.floor(e/4/t.width),d=Math.floor((s+o[c%2][l%2])/2)<p.value?0:255;t.data.fill(d,e,e+3)}return t}function A(t){const o=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let e=0;e<t.data.length;e+=4){const s=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,c=e/4%t.width,l=Math.floor(e/4/t.width),d=Math.floor((s+o[c%4][l%4])/2)<p.value?0:255;t.data.fill(d,e,e+3)}return t}function U(t){const o=[[0,32,8,40,2,34,10,42],[48,16,56,24,50,18,58,26],[12,44,4,36,14,46,6,38],[60,28,52,20,62,30,54,22],[3,35,11,43,1,33,9,41],[51,19,59,27,49,17,57,25],[15,47,7,39,13,45,5,37],[63,31,55,23,61,29,53,21]];for(let e=0;e<t.data.length;e+=4){const s=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,c=e/4%t.width,l=Math.floor(e/4/t.width),d=Math.floor((s+o[c%8][l%8]*4)/2)<p.value?0:255;t.data.fill(d,e,e+3)}return t}function E(t){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114,c=Math.floor((e+Math.random()*255)/2)<p.value?0:255;t.data.fill(c,o,o+3)}return t}async function G(t){if(t.target.files&&t.target.files[0]){let o=new FileReader;o.readAsDataURL(t.target.files[0]),o.onload=e=>{g=e.target.result,S()}}}async function b(){u.value==="1x1"?(i=1,r.value=8192):u.value==="2x2"?(i=2,r.value=4096):u.value==="4x4"?(i=4,r.value=2048):u.value==="8x8"?(i=8,r.value=1024):u.value==="32x32"?(i=32,r.value=256):(i=16,r.value=512),g&&S()}async function j(){const t=new Image;t.src="./faviconLoad.ico",await new Promise(e=>{t.onload=()=>e(1)}),R.drawImage(t,0,0,16,16),document.getElementById("favicon").setAttribute("href",f.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}async function F(){const t=new Image;t.src="./favicon.ico",await new Promise(e=>{t.onload=()=>e(1)}),R.drawImage(t,0,0,16,16),document.getElementById("favicon").setAttribute("href",f.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}return(t,o)=>(C(),L("div",z,[O,q,Q,n("div",X,[n("div",Y,[Z,B(n("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>u.value=e),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:o[1]||(o[1]=e=>b())},te,544),[[M,u.value]]),n("p",oe,"PNG or JPG ("+D(r.value)+"x"+D(r.value)+"px max)",1),n("input",{class:"block w-[90%] text-sm text-gray-400 rounded-lg border cursor-pointer focus:outline-none bg-gray-700 border-gray-600 placeholder-gray-400",type:"file",accept:".png, .jpg",onChange:o[2]||(o[2]=e=>G(e))},null,32)]),n("div",ae,[ne,B(n("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>w.value=e),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:o[4]||(o[4]=e=>b())},le,544),[[M,w.value]]),n("label",ie,"Threshold: "+D(p.value),1),B(n("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>p.value=e),type:"range",min:"0",max:"255",class:"w-[90%] h-2 rounded-lg appearance-none cursor-pointer bg-gray-700",onChange:o[6]||(o[6]=e=>b())},null,544),[[K,p.value]])])]),H(y)?(C(),L("img",re)):T("",!0),n("div",ce,[n("img",{src:k.value,class:"w-[75%]"},null,8,ue)])]))}});export{me as default};
