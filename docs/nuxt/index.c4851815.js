import{a as ot,b as nt,r as f,o as M,e as R,f as i,w as y,v as G,t as A,h as rt,i as P,j as E,k as J}from"./entry.52fd12a4.js";const lt=""+globalThis.__publicAssetsURL("load.png"),st={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},it=i("p",{class:"text-lg text-gray-300"},"Lamp Display Emulator by KK",-1),dt=i("a",{class:"text-xs text-blue-400 underline",href:"https://github.com/KK-mp4/Lamp-Display-Emulator#readme",target:"_blank",rel:"noopener noreferrer"},"More info in GitHub",-1),ct=i("a",{class:"mb-5 text-xs text-blue-400 underline",href:"https://kk-mp4.github.io/RGB-Lamp-Display-Emulator/",target:"_blank",rel:"noopener noreferrer"},"RGB 3 bit version",-1),ut={class:"flex flex-wrap flex-row justify-center"},ht={class:"w-[300px] mb-5"},pt=i("p",{class:"mb-1 text-sm text-gray-300"},"Lamp texture resolution:",-1),ft=J('<option value="1x1">1x1</option><option value="2x2">2x2</option><option value="4x4">4x4</option><option value="8x8">8x8</option><option value="16x16">16x16</option><option value="32x32">32x32</option>',6),vt=[ft],wt={class:"mb-1 text-sm text-gray-300"},xt={class:"w-[300px] mb-5"},bt=i("p",{class:"mb-1 text-sm text-gray-300"},"Dithering algorithm:",-1),yt=J('<option value="None">None</option><option value="Random noise">Random noise</option><option value="Bayer 2x2">Bayer 2x2</option><option value="Bayer 4x4">Bayer 4x4</option><option value="Bayer 8x8">Bayer 8x8</option><option value="Cluster dot">WIP Cluster dot</option><option value="Blue noise">WIP Blue noise</option><option value="Riemersma">WIP Riemersma</option><option value="Floyd-Steinberg">Floyd-Steinberg</option><option value="Jarvis-Judice-Ninke">Jarvis-Judice-Ninke</option><option value="Atkinson">Atkinson</option><option value="Stucki">Stucki</option><option value="Burkes">Burkes</option><option value="Sierra">Sierra</option><option value="Two-Row Sierra">Two-Row Sierra</option><option value="Sierra Lite">Sierra Lite</option><option value="Stevenson-Arce">Stevenson-Arce</option>',17),kt=[yt],mt={class:"block mb-2 text-sm font-medium text-gray-300"},gt={class:"w-[300px] mb-5"},Dt={class:"mt-7 flex items-center mb-4"},_t=i("label",{for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Gamme correction",-1),Bt={class:"flex items-center mb-4"},It=i("label",{for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Output as black / white",-1),St={key:0,class:"animate-spin h-7 w-7 top-52 absolute",src:lt},Ct={class:"flex justify-center",style:{"image-rendering":"pixelated"}},Mt=["src"],Lt=ot({__name:"index",setup(Rt){nt({title:"Generator"});const h=f("16x16"),k=f("");let c=16;const u=f(512);let g;const D=f("None"),d=f(128),_=f(!1),B=f(!1),I=f(!1);let x=document.createElement("canvas");x.width=16,x.height=16;let U=x.getContext("2d");async function L(){const e=Date.now();_.value=!0,et();const o=new Image;o.src=g,await new Promise(s=>{o.onload=()=>s(1)});let t=o.width,a=o.height;t>u.value&&(t=u.value),a>u.value&&(a=u.value);const n=document.createElement("canvas");n.width=t,n.height=a;const l=n.getContext("2d",{willReadFrequently:!0});l.drawImage(o,0,0,o.width,o.height);const r=l.getImageData(0,0,t,a);if(B.value){const s=F(r);l.putImageData(s,0,0)}switch(D.value){case"None":break;case"Random noise":{const s=j(r);l.putImageData(s,0,0);break}case"Bayer 2x2":{const s=T(r);l.putImageData(s,0,0);break}case"Bayer 4x4":{const s=W(r);l.putImageData(s,0,0);break}case"Bayer 8x8":{const s=$(r);l.putImageData(s,0,0);break}case"Blue noise":break;case"Riemersma":break;case"Floyd-Steinberg":{const s=K(r);l.putImageData(s,0,0);break}case"Jarvis-Judice-Ninke":{const s=O(r);l.putImageData(s,0,0);break}case"Atkinson":{const s=H(r);l.putImageData(s,0,0);break}case"Stucki":{const s=z(r);l.putImageData(s,0,0);break}case"Burkes":{const s=q(r);l.putImageData(s,0,0);break}case"Sierra":{const s=Q(r);l.putImageData(s,0,0);break}case"Two-Row Sierra":{const s=X(r);l.putImageData(s,0,0);break}case"Sierra Lite":{const s=Y(r);l.putImageData(s,0,0);break}case"Stevenson-Arce":{const s=Z(r);l.putImageData(s,0,0);break}}const p=new Image;p.src="./"+h.value+"/redstone_lamp_off.png",await new Promise(s=>{p.onload=()=>s(1)});const C=new Image;C.src="./"+h.value+"/redstone_lamp_on.png",await new Promise(s=>{C.onload=()=>s(1)});const m=document.createElement("canvas");m.width=t*c,m.height=a*c;const N=m.getContext("2d");if(I.value)k.value=n.toDataURL();else{const s=l.getImageData(0,0,t,a);for(let v=0;v<a;v++)for(let w=0;w<t;w++).2126*s.data[(v*t+w)*4]+.7152*s.data[(v*t+w)*4+1]+.0722*s.data[(v*t+w)*4+2]>=d.value?N.drawImage(C,w*c,v*c):N.drawImage(p,w*c,v*c);k.value=m.toDataURL()}_.value=!1,at(),console.log(Date.now()-e+"ms - Calculation time")}function F(e){for(let o=0;o<e.data.length;o+=4){const t=e.data[o]/255,a=e.data[o+1]/255,n=e.data[o+2]/255,l=.2126*S(t)+.7152*S(a)+.0722*S(n),r=V(l)*2.55;e.data.fill(r,o,o+3)}return e}function S(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function V(e){return e<=216/24389?e*(24389/27):Math.pow(e,1/3)*116-16}function j(e){for(let o=0;o<e.data.length;o+=4){const t=e.data[o]*.299+e.data[o+1]*.587+e.data[o+2]*.114,n=Math.floor((t+Math.random()*255)/2)<d.value?0:255;e.data.fill(n,o,o+3)}return e}function T(e){const o=[[0,127],[192,63]];for(let t=0;t<e.data.length;t+=4){const a=e.data[t]*.299+e.data[t+1]*.587+e.data[t+2]*.114,n=t/4%e.width,l=Math.floor(t/4/e.width),p=Math.floor((a+o[n%2][l%2])/2)<d.value?0:255;e.data.fill(p,t,t+3)}return e}function W(e){const o=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let t=0;t<e.data.length;t+=4){const a=e.data[t]*.299+e.data[t+1]*.587+e.data[t+2]*.114,n=t/4%e.width,l=Math.floor(t/4/e.width),p=Math.floor((a+o[n%4][l%4])/2)<d.value?0:255;e.data.fill(p,t,t+3)}return e}function $(e){const o=[[0,32,8,40,2,34,10,42],[48,16,56,24,50,18,58,26],[12,44,4,36,14,46,6,38],[60,28,52,20,62,30,54,22],[3,35,11,43,1,33,9,41],[51,19,59,27,49,17,57,25],[15,47,7,39,13,45,5,37],[63,31,55,23,61,29,53,21]];for(let t=0;t<e.data.length;t+=4){const a=e.data[t]*.299+e.data[t+1]*.587+e.data[t+2]*.114,n=t/4%e.width,l=Math.floor(t/4/e.width),p=Math.floor((a+o[n%8][l%8]*4)/2)<d.value?0:255;e.data.fill(p,t,t+3)}return e}function K(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/16);e.data.fill(l,n,n+3),t[a+1]+=r*7,t[a+o-1]+=r*3,t[a+o]+=r*5,t[a+o+1]+=r}return e}function H(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/8);e.data.fill(l,n,n+3),t[a+1]+=r,t[a+2]+=r,t[a+o-1]+=r,t[a+o]+=r,t[a+o+1]+=r,t[a+2*o]+=r}return e}function O(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/48);e.data.fill(l,n,n+3),t[a+1]+=r*7,t[a+2]+=r*5,t[a+o-2]+=r*3,t[a+o-1]+=r*5,t[a+o]+=r*7,t[a+o+1]+=r*5,t[a+o+2]+=r*3,t[a+o*2-2]+=r,t[a+o*2-1]+=r*3,t[a+o*2]+=r*5,t[a+o*2+1]+=r*3,t[a+o*2+2]+=r}return e}function z(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/42);e.data.fill(l,n,n+3),t[a+1]+=r<<3,t[a+2]+=r<<2,t[a+o-2]+=r<<1,t[a+o-1]+=r<<2,t[a+o]+=r<<3,t[a+o+1]+=r<<2,t[a+o+2]+=r<<1,t[a+o*2-2]+=r,t[a+o*2-1]+=r<<1,t[a+o*2]+=r<<2,t[a+o*2+1]+=r<<1,t[a+o*2+2]+=r}return e}function q(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/32);e.data.fill(l,n,n+3),t[a+1]+=r<<3,t[a+2]+=r<<2,t[a+o-2]+=r<<1,t[a+o-1]+=r<<2,t[a+o]+=r<<3,t[a+o+1]+=r<<2,t[a+o+2]+=r<<1}return e}function Q(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/32);e.data.fill(l,n,n+3),t[a+1]+=r*5,t[a+2]+=r*3,t[a+o-2]+=r<<1,t[a+o-1]+=r<<2,t[a+o]+=r*5,t[a+o+1]+=r<<2,t[a+o+2]+=r<<1,t[a+o*2-1]+=r<<1,t[a+o*2]+=r*3,t[a+o*2+1]+=r<<1}return e}function X(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/16);e.data.fill(l,n,n+3),t[a+1]+=r<<2,t[a+2]+=r*3,t[a+o-2]+=r,t[a+o-1]+=r<<1,t[a+o]+=r*3,t[a+o+1]+=r<<1,t[a+o+2]+=r}return e}function Y(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/4);e.data.fill(l,n,n+3),t[a+1]+=r<<1,t[a+o-1]+=r,t[a+o]+=r}return e}function Z(e){const o=e.width,t=new Uint8ClampedArray(e.width*e.height);for(let a=0,n=0;n<e.data.length;a++,n+=4)t[a]=e.data[n]*.299+e.data[n+1]*.587+e.data[n+2]*.114;for(let a=0,n=0;n<e.data.length;a++,n+=4){const l=t[a]<d.value?0:255,r=Math.floor((t[a]-l)/200);e.data.fill(l,n,n+3),t[a+2]+=r<<5,t[a+o-3]+=r*12,t[a+o-1]+=r*26,t[a+o+1]+=r*30,t[a+o+3]+=r<<4,t[a+o*2-2]+=r*12,t[a+o*2]+=r*26,t[a+o*2+2]+=r*12,t[a+o*3-3]+=r*5,t[a+o*3-1]+=r*12,t[a+o*3+1]+=r*12,t[a+o*3+3]+=r*5}return e}async function tt(e){if(e.target.files&&e.target.files[0]){let o=new FileReader;o.readAsDataURL(e.target.files[0]),o.onload=t=>{g=t.target.result,L()}}}async function b(){h.value==="1x1"?(c=1,u.value=8192):h.value==="2x2"?(c=2,u.value=4096):h.value==="4x4"?(c=4,u.value=2048):h.value==="8x8"?(c=8,u.value=1024):h.value==="32x32"?(c=32,u.value=256):(c=16,u.value=512),g&&L()}async function et(){const e=new Image;e.src="./faviconLoad.ico",await new Promise(t=>{e.onload=()=>t(1)}),U.drawImage(e,0,0,16,16),document.getElementById("favicon").setAttribute("href",x.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}async function at(){const e=new Image;e.src="./favicon.ico",await new Promise(t=>{e.onload=()=>t(1)}),U.drawImage(e,0,0,16,16),document.getElementById("favicon").setAttribute("href",x.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}return(e,o)=>(M(),R("div",st,[it,dt,ct,i("div",ut,[i("div",ht,[pt,y(i("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>h.value=t),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:o[1]||(o[1]=t=>b())},vt,544),[[G,h.value]]),i("p",wt,"PNG or JPG ("+A(u.value)+"x"+A(u.value)+"px max)",1),i("input",{class:"block w-[90%] text-sm text-gray-400 rounded-lg border cursor-pointer focus:outline-none bg-gray-700 border-gray-600 placeholder-gray-400",type:"file",accept:".png, .jpg",onChange:o[2]||(o[2]=t=>tt(t))},null,32)]),i("div",xt,[bt,y(i("select",{"onUpdate:modelValue":o[3]||(o[3]=t=>D.value=t),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:o[4]||(o[4]=t=>b())},kt,544),[[G,D.value]]),i("label",mt,"Threshold: "+A(d.value),1),y(i("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>d.value=t),type:"range",min:"0",max:"255",class:"mb-4 w-[90%] h-2 rounded-lg appearance-none cursor-pointer bg-gray-700",onChange:o[6]||(o[6]=t=>b())},null,544),[[rt,d.value]])]),i("div",gt,[i("div",Dt,[y(i("input",{"onUpdate:modelValue":o[7]||(o[7]=t=>B.value=t),onChange:o[8]||(o[8]=t=>b()),id:"default-checkbox",type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[P,B.value]]),_t]),i("div",Bt,[y(i("input",{"onUpdate:modelValue":o[9]||(o[9]=t=>I.value=t),onChange:o[10]||(o[10]=t=>b()),id:"default-checkbox",type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[P,I.value]]),It])])]),_.value?(M(),R("img",St)):E("",!0),i("div",Ct,[k.value?(M(),R("img",{key:0,src:k.value,class:"w-[90vw] h-[75vh] object-contain"},null,8,Mt)):E("",!0)])]))}});export{Lt as default};
