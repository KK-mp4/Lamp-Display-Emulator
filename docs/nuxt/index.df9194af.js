import{a as $,b as z,r as x,o as L,e as U,f as v,w as g,v as G,t as N,h as K,i as E,j as F,k as J}from"./entry.5a808c1a.js";function q(t,d){for(let o=0;o<t.data.length;o+=4){const n=(t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114+Math.random()*255)/2<d?0:255;t.data.fill(n,o,o+3)}return t}async function O(t,d){const o=new Image;o.src="./bluenoise.png",await new Promise(u=>{o.onload=()=>u(1)});const e=o.width,a=o.height,n=document.createElement("canvas");n.width=e,n.height=a;const s=n.getContext("2d",{willReadFrequently:!0});s.drawImage(o,0,0,e,a);const l=s.getImageData(0,0,e,a);for(let u=0;u<t.data.length;u+=4){const m=t.data[u]*.299+t.data[u+1]*.587+t.data[u+2]*.114,I=u/4%t.width,b=Math.floor(u/4/t.width),B=(m+l.data[I%e*4*e+b%a*4])/2<d?0:255;t.data.fill(B,u,u+3)}return t}function Q(t,d){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114,a=o/4%t.width,n=Math.floor(o/4/t.width),s=(.06711056*a+.00583715*n)%1*52.9829189%1,u=(e+s*255)/2<d?0:255;t.data.fill(u,o,o+3)}return t}function X(t,d){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114,a=o/4%t.width,n=Math.floor(o/4/t.width),s=(a/1.324717957244746+n/(1.324717957244746*1.324717957244746))%1,u=(e+s*255)/2<d?0:255;t.data.fill(u,o,o+3)}return t}function Y(t,d){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114,a=o/4%t.width,n=Math.floor(o/4/t.width),s=(a/5+n*.6)%1,u=(e+s*255)/2<d?0:255;t.data.fill(u,o,o+3)}return t}function Z(t,d){const o=[[0,127],[192,63]];for(let e=0;e<t.data.length;e+=4){const a=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,n=e/4%t.width,s=Math.floor(e/4/t.width),u=(a+o[n%2][s%2])/2<d?0:255;t.data.fill(u,e,e+3)}return t}function tt(t,d){const o=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let e=0;e<t.data.length;e+=4){const a=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,n=e/4%t.width,s=Math.floor(e/4/t.width),u=(a+o[n%4][s%4])/2<d?0:255;t.data.fill(u,e,e+3)}return t}function et(t,d){const o=[[0,128,32,160,8,136,40,168],[192,64,224,96,200,72,232,104],[48,176,16,144,56,184,24,152],[240,112,208,80,248,120,216,88],[12,140,44,172,4,132,36,164],[204,76,236,108,196,68,228,100],[60,188,28,156,52,180,20,148],[252,124,220,92,244,116,212,84]];for(let e=0;e<t.data.length;e+=4){const a=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,n=e/4%t.width,s=Math.floor(e/4/t.width),u=(a+o[n%8][s%8])/2<d?0:255;t.data.fill(u,e,e+3)}return t}function at(t,d){const o=[[0,128,32,160],[64,192,96,224],[48,176,16,144],[112,240,80,208]];for(let e=0;e<t.data.length;e+=4){const a=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,n=e/4%t.width,s=Math.floor(e/4/t.width),u=(a+o[n%4][s%4])/2<d?0:255;t.data.fill(u,e,e+3)}return t}function ot(t,d){const o=[[167,200,230,216,181],[94,72,193,242,232],[36,52,222,167,200],[181,126,210,94,72],[232,153,111,36,52]];for(let e=0;e<t.data.length;e+=4){const a=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,n=e/4%t.width,s=Math.floor(e/4/t.width),u=(a+o[n%5][s%5])/2<d?0:255;t.data.fill(u,e,e+3)}return t}function nt(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/16);t.data.fill(s,n,n+3),e[a+1]+=l*7,e[a+o-1]+=l*3,e[a+o]+=l*5,e[a+o+1]+=l}return t}function lt(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/48);t.data.fill(s,n,n+3),e[a+1]+=l*7,e[a+2]+=l*5,e[a+o-2]+=l*3,e[a+o-1]+=l*5,e[a+o]+=l*7,e[a+o+1]+=l*5,e[a+o+2]+=l*3,e[a+o*2-2]+=l,e[a+o*2-1]+=l*3,e[a+o*2]+=l*5,e[a+o*2+1]+=l*3,e[a+o*2+2]+=l}return t}function st(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/8);t.data.fill(s,n,n+3),e[a+1]+=l,e[a+2]+=l,e[a+o-1]+=l,e[a+o]+=l,e[a+o+1]+=l,e[a+2*o]+=l}return t}function rt(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/42);t.data.fill(s,n,n+3),e[a+1]+=l<<3,e[a+2]+=l<<2,e[a+o-2]+=l<<1,e[a+o-1]+=l<<2,e[a+o]+=l<<3,e[a+o+1]+=l<<2,e[a+o+2]+=l<<1,e[a+o*2-2]+=l,e[a+o*2-1]+=l<<1,e[a+o*2]+=l<<2,e[a+o*2+1]+=l<<1,e[a+o*2+2]+=l}return t}function dt(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/32);t.data.fill(s,n,n+3),e[a+1]+=l<<3,e[a+2]+=l<<2,e[a+o-2]+=l<<1,e[a+o-1]+=l<<2,e[a+o]+=l<<3,e[a+o+1]+=l<<2,e[a+o+2]+=l<<1}return t}function it(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/32);t.data.fill(s,n,n+3),e[a+1]+=l*5,e[a+2]+=l*3,e[a+o-2]+=l<<1,e[a+o-1]+=l<<2,e[a+o]+=l*5,e[a+o+1]+=l<<2,e[a+o+2]+=l<<1,e[a+o*2-1]+=l<<1,e[a+o*2]+=l*3,e[a+o*2+1]+=l<<1}return t}function ct(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/16);t.data.fill(s,n,n+3),e[a+1]+=l<<2,e[a+2]+=l*3,e[a+o-2]+=l,e[a+o-1]+=l<<1,e[a+o]+=l*3,e[a+o+1]+=l<<1,e[a+o+2]+=l}return t}function ut(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/4);t.data.fill(s,n,n+3),e[a+1]+=l<<1,e[a+o-1]+=l,e[a+o]+=l}return t}function ht(t,d){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<d?0:255,l=Math.floor((e[a]-s)/200);t.data.fill(s,n,n+3),e[a+2]+=l<<5,e[a+o-3]+=l*12,e[a+o-1]+=l*26,e[a+o+1]+=l*30,e[a+o+3]+=l<<4,e[a+o*2-2]+=l*12,e[a+o*2]+=l*26,e[a+o*2+2]+=l*12,e[a+o*3-3]+=l*5,e[a+o*3-1]+=l*12,e[a+o*3+1]+=l*12,e[a+o*3+3]+=l*5}return t}const pt=""+globalThis.__publicAssetsURL("load.png"),ft={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},vt=v("p",{class:"text-lg text-gray-300"},"Lamp Display Emulator by KK",-1),wt=v("a",{class:"text-xs text-blue-400 underline",href:"https://github.com/KK-mp4/Lamp-Display-Emulator#readme",target:"_blank",rel:"noopener noreferrer"},"More info in GitHub",-1),xt=v("a",{class:"mb-5 text-xs text-blue-400 underline",href:"https://kk-mp4.github.io/RGB-Lamp-Display-Emulator/",target:"_blank",rel:"noopener noreferrer"},"RGB 3 bit version",-1),bt={class:"flex flex-wrap flex-row justify-center"},yt={class:"w-[300px] mb-5"},Dt=v("p",{class:"mb-1 text-sm text-gray-300"},"Lamp texture resolution:",-1),kt=J('<option value="1x1">1x1</option><option value="2x2">2x2</option><option value="4x4">4x4</option><option value="8x8">8x8</option><option value="16x16">16x16</option><option value="32x32">32x32</option>',6),mt=[kt],It={class:"mb-1 text-sm text-gray-300"},_t={class:"w-[300px] mb-5"},gt=v("p",{class:"mb-1 text-sm text-gray-300"},"Dithering algorithm:",-1),Bt=J('<option value="None">None</option><option class="text-[0px] bg-gray-500" disabled>\xA0</option><option value="White noise">White noise</option><option value="Blue noise">Blue noise</option><option value="Interleaved Gradient Noise">Interleaved Gradient noise</option><option value="R2">R2</option><option value="Plus">Plus</option><option value="Bayer 2x2">Bayer 2x2</option><option value="Bayer 4x4">Bayer 4x4</option><option value="Bayer 8x8">Bayer 8x8</option><option value="Pattern Halftoning">Pattern Halftoning</option><option value="Cluster dot">Cluster dot</option><option class="text-[0px] bg-gray-500" disabled>\xA0</option><option value="Riemersma">WIP Riemersma</option><option value="Floyd-Steinberg">Floyd-Steinberg</option><option value="Gradient-based">WIP Gradient-based</option><option value="Lattice-Boltzmann">WIP Lattice-Boltzmann</option><option value="Jarvis-Judice-Ninke">Jarvis-Judice-Ninke</option><option value="Atkinson">Atkinson</option><option value="Stucki">Stucki</option><option value="Burkes">Burkes</option><option value="Sierra">Sierra</option><option value="Two-Row Sierra">Two-Row Sierra</option><option value="Sierra Lite">Sierra Lite</option><option value="Stevenson-Arce">Stevenson-Arce</option>',25),Ct=[Bt],St={class:"block mb-2 text-sm font-medium text-gray-300"},Mt={class:"w-[300px] mb-5"},At={class:"mt-7 flex items-center mb-4"},Rt=v("label",{for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-300"},"Gamma correction",-1),Lt={class:"flex items-center mb-4"},Ut=v("label",{for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-300"},"Apply lamp texture",-1),Nt={key:0,class:"animate-spin h-7 w-7 top-52 absolute",src:pt},Pt={class:"flex justify-center",style:{"image-rendering":"pixelated"}},Gt=["src"],Jt=$({__name:"index",setup(t){z({title:"Generator"});const d=x("16x16"),o=x("");let e=16;const a=x(512);let n;const s=x("None"),l=x(128),u=x(!1),m=x(!1),I=x(!0);let b=document.createElement("canvas");b.width=16,b.height=16;let S=b.getContext("2d");async function B(){const h=Date.now();u.value=!0,H();const i=new Image;i.src=n,await new Promise(r=>{i.onload=()=>r(1)});let c=i.width,w=i.height;c>a.value&&(c=a.value),w>a.value&&(w=a.value);const k=document.createElement("canvas");k.width=c,k.height=w;const p=k.getContext("2d",{willReadFrequently:!0});p.drawImage(i,0,0,i.width,i.height);const f=p.getImageData(0,0,c,w);if(m.value){const r=V(f);p.putImageData(r,0,0)}switch(s.value){case"None":break;case"White noise":{const r=q(f,l.value);p.putImageData(r,0,0);break}case"Blue noise":{const r=await O(f,l.value);p.putImageData(r,0,0);break}case"Interleaved Gradient Noise":{const r=Q(f,l.value);p.putImageData(r,0,0);break}case"R2":{const r=X(f,l.value);p.putImageData(r,0,0);break}case"Plus":{const r=Y(f,l.value);p.putImageData(r,0,0);break}case"Bayer 2x2":{const r=Z(f,l.value);p.putImageData(r,0,0);break}case"Bayer 4x4":{const r=tt(f,l.value);p.putImageData(r,0,0);break}case"Bayer 8x8":{const r=et(f,l.value);p.putImageData(r,0,0);break}case"Pattern Halftoning":{const r=at(f,l.value);p.putImageData(r,0,0);break}case"Cluster dot":{const r=ot(f,l.value);p.putImageData(r,0,0);break}case"Riemersma":break;case"Floyd-Steinberg":{const r=nt(f,l.value);p.putImageData(r,0,0);break}case"Jarvis-Judice-Ninke":{const r=lt(f,l.value);p.putImageData(r,0,0);break}case"Atkinson":{const r=st(f,l.value);p.putImageData(r,0,0);break}case"Stucki":{const r=rt(f,l.value);p.putImageData(r,0,0);break}case"Burkes":{const r=dt(f,l.value);p.putImageData(r,0,0);break}case"Sierra":{const r=it(f,l.value);p.putImageData(r,0,0);break}case"Two-Row Sierra":{const r=ct(f,l.value);p.putImageData(r,0,0);break}case"Sierra Lite":{const r=ut(f,l.value);p.putImageData(r,0,0);break}case"Stevenson-Arce":{const r=ht(f,l.value);p.putImageData(r,0,0);break}}const A=new Image;A.src="./"+d.value+"/redstone_lamp_off.png",await new Promise(r=>{A.onload=()=>r(1)});const R=new Image;R.src="./"+d.value+"/redstone_lamp_on.png",await new Promise(r=>{R.onload=()=>r(1)});const C=document.createElement("canvas");C.width=c*e,C.height=w*e;const P=C.getContext("2d");if(I.value){const r=p.getImageData(0,0,c,w);for(let y=0;y<w;y++)for(let D=0;D<c;D++).2126*r.data[(y*c+D)*4]+.7152*r.data[(y*c+D)*4+1]+.0722*r.data[(y*c+D)*4+2]>=l.value?P.drawImage(R,D*e,y*e):P.drawImage(A,D*e,y*e);o.value=C.toDataURL()}else o.value=k.toDataURL();u.value=!1,T(),console.log(Date.now()-h+"ms - Calculation time")}function V(h){for(let i=0;i<h.data.length;i+=4){const c=h.data[i]/255,w=h.data[i+1]/255,k=h.data[i+2]/255,p=.2126*M(c)+.7152*M(w)+.0722*M(k),f=W(p)*2.55;h.data.fill(f,i,i+3)}return h}function M(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function W(h){return h<=216/24389?h*(24389/27):Math.pow(h,1/3)*116-16}async function j(h){if(h.target.files&&h.target.files[0]){let i=new FileReader;i.readAsDataURL(h.target.files[0]),i.onload=c=>{n=c.target.result,B()}}}async function _(){d.value==="1x1"?(e=1,a.value=8192):d.value==="2x2"?(e=2,a.value=4096):d.value==="4x4"?(e=4,a.value=2048):d.value==="8x8"?(e=8,a.value=1024):d.value==="32x32"?(e=32,a.value=256):(e=16,a.value=512),n&&B()}async function H(){const h=new Image;h.src="./faviconLoad.ico",await new Promise(c=>{h.onload=()=>c(1)}),S.drawImage(h,0,0,16,16),document.getElementById("favicon").setAttribute("href",b.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}async function T(){const h=new Image;h.src="./favicon.ico",await new Promise(c=>{h.onload=()=>c(1)}),S.drawImage(h,0,0,16,16),document.getElementById("favicon").setAttribute("href",b.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}return(h,i)=>(L(),U("div",ft,[vt,wt,xt,v("div",bt,[v("div",yt,[Dt,g(v("select",{"onUpdate:modelValue":i[0]||(i[0]=c=>d.value=c),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:i[1]||(i[1]=c=>_())},mt,544),[[G,d.value]]),v("p",It,"PNG or JPG ("+N(a.value)+"x"+N(a.value)+"px max)",1),v("input",{class:"block w-[90%] text-sm text-gray-400 rounded-lg border cursor-pointer focus:outline-none bg-gray-700 border-gray-600 placeholder-gray-400",type:"file",accept:".png, .jpg",onChange:i[2]||(i[2]=c=>j(c))},null,32)]),v("div",_t,[gt,g(v("select",{"onUpdate:modelValue":i[3]||(i[3]=c=>s.value=c),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:i[4]||(i[4]=c=>_())},Ct,544),[[G,s.value]]),v("label",St,"Threshold: "+N(l.value),1),g(v("input",{"onUpdate:modelValue":i[5]||(i[5]=c=>l.value=c),type:"range",min:"0",max:"255",class:"mb-4 w-[90%] h-2 rounded-lg appearance-none cursor-pointer bg-gray-700",onChange:i[6]||(i[6]=c=>_())},null,544),[[K,l.value]])]),v("div",Mt,[v("div",At,[g(v("input",{"onUpdate:modelValue":i[7]||(i[7]=c=>m.value=c),onChange:i[8]||(i[8]=c=>_()),id:"default-checkbox",type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"},null,544),[[E,m.value]]),Rt]),v("div",Lt,[g(v("input",{"onUpdate:modelValue":i[9]||(i[9]=c=>I.value=c),onChange:i[10]||(i[10]=c=>_()),id:"default-checkbox",type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"},null,544),[[E,I.value]]),Ut])])]),u.value?(L(),U("img",Nt)):F("",!0),v("div",Pt,[o.value?(L(),U("img",{key:0,src:o.value,class:"w-[90vw] h-[70vh] object-contain"},null,8,Gt)):F("",!0)])]))}});export{Jt as default};
