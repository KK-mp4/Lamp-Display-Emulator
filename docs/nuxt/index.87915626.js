import{a as rt,b as it,r as v,o as A,e as R,f as d,w as D,v as G,t as L,h as dt,i as P,j as E,k as F}from"./entry.285529d3.js";const ct=""+globalThis.__publicAssetsURL("load.png"),ut={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},ht=d("p",{class:"text-lg text-gray-300"},"Lamp Display Emulator by KK",-1),pt=d("a",{class:"text-xs text-blue-400 underline",href:"https://github.com/KK-mp4/Lamp-Display-Emulator#readme",target:"_blank",rel:"noopener noreferrer"},"More info in GitHub",-1),ft=d("a",{class:"mb-5 text-xs text-blue-400 underline",href:"https://kk-mp4.github.io/RGB-Lamp-Display-Emulator/",target:"_blank",rel:"noopener noreferrer"},"RGB 3 bit version",-1),vt={class:"flex flex-wrap flex-row justify-center"},wt={class:"w-[300px] mb-5"},xt=d("p",{class:"mb-1 text-sm text-gray-300"},"Lamp texture resolution:",-1),bt=F('<option value="1x1">1x1</option><option value="2x2">2x2</option><option value="4x4">4x4</option><option value="8x8">8x8</option><option value="16x16">16x16</option><option value="32x32">32x32</option>',6),yt=[bt],mt={class:"mb-1 text-sm text-gray-300"},Dt={class:"w-[300px] mb-5"},kt=d("p",{class:"mb-1 text-sm text-gray-300"},"Dithering algorithm:",-1),gt=F('<option value="None">None</option><option class="text-[0px] bg-gray-500" disabled>\xA0</option><option value="White noise">White noise</option><option value="Blue noise">Blue noise</option><option value="Interleaved Gradient Noise">Interleaved Gradient noise</option><option value="R2">R2</option><option value="Plus">Plus</option><option class="text-[0px] bg-gray-500" disabled>\xA0</option><option value="Bayer 2x2">Bayer 2x2</option><option value="Bayer 4x4">Bayer 4x4</option><option value="Bayer 8x8">Bayer 8x8</option><option value="Cluster dot">WIP Cluster dot</option><option value="Riemersma">WIP Riemersma</option><option class="text-[0px] bg-gray-500" disabled>\xA0</option><option value="Floyd-Steinberg">Floyd-Steinberg</option><option value="Gradient-based">WIP Gradient-based</option><option value="Lattice-Boltzmann">WIP Lattice-Boltzmann</option><option value="Jarvis-Judice-Ninke">Jarvis-Judice-Ninke</option><option value="Atkinson">Atkinson</option><option value="Stucki">Stucki</option><option value="Burkes">Burkes</option><option value="Sierra">Sierra</option><option value="Two-Row Sierra">Two-Row Sierra</option><option value="Sierra Lite">Sierra Lite</option><option value="Stevenson-Arce">Stevenson-Arce</option>',25),It=[gt],_t={class:"block mb-2 text-sm font-medium text-gray-300"},Bt={class:"w-[300px] mb-5"},Mt={class:"mt-7 flex items-center mb-4"},Ct=d("label",{for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-300"},"Gamma correction",-1),St={class:"flex items-center mb-4"},At=d("label",{for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-300"},"Apply lamp texture",-1),Rt={key:0,class:"animate-spin h-7 w-7 top-52 absolute",src:ct},Lt={class:"flex justify-center",style:{"image-rendering":"pixelated"}},Ut=["src"],Et=rt({__name:"index",setup(Nt){it({title:"Generator"});const p=v("16x16"),k=v("");let u=16;const h=v(512);let I;const _=v("None"),c=v(128),B=v(!1),M=v(!1),C=v(!0);let b=document.createElement("canvas");b.width=16,b.height=16;let U=b.getContext("2d");async function N(){const t=Date.now();B.value=!0,lt();const o=new Image;o.src=I,await new Promise(r=>{o.onload=()=>r(1)});let e=o.width,a=o.height;e>h.value&&(e=h.value),a>h.value&&(a=h.value);const n=document.createElement("canvas");n.width=e,n.height=a;const s=n.getContext("2d",{willReadFrequently:!0});s.drawImage(o,0,0,o.width,o.height);const l=s.getImageData(0,0,e,a);if(M.value){const r=J(l);s.putImageData(r,0,0)}switch(_.value){case"None":break;case"White noise":{const r=V(l);s.putImageData(r,0,0);break}case"Blue noise":{const r=await T(l);s.putImageData(r,0,0);break}case"Interleaved Gradient Noise":{const r=j(l);s.putImageData(r,0,0);break}case"R2":{const r=$(l);s.putImageData(r,0,0);break}case"Plus":{const r=z(l);s.putImageData(r,0,0);break}case"Bayer 2x2":{const r=K(l);s.putImageData(r,0,0);break}case"Bayer 4x4":{const r=H(l);s.putImageData(r,0,0);break}case"Bayer 8x8":{const r=q(l);s.putImageData(r,0,0);break}case"Riemersma":break;case"Floyd-Steinberg":{const r=O(l);s.putImageData(r,0,0);break}case"Jarvis-Judice-Ninke":{const r=X(l);s.putImageData(r,0,0);break}case"Atkinson":{const r=Q(l);s.putImageData(r,0,0);break}case"Stucki":{const r=Y(l);s.putImageData(r,0,0);break}case"Burkes":{const r=Z(l);s.putImageData(r,0,0);break}case"Sierra":{const r=tt(l);s.putImageData(r,0,0);break}case"Two-Row Sierra":{const r=et(l);s.putImageData(r,0,0);break}case"Sierra Lite":{const r=at(l);s.putImageData(r,0,0);break}case"Stevenson-Arce":{const r=ot(l);s.putImageData(r,0,0);break}}const i=new Image;i.src="./"+p.value+"/redstone_lamp_off.png",await new Promise(r=>{i.onload=()=>r(1)});const m=new Image;m.src="./"+p.value+"/redstone_lamp_on.png",await new Promise(r=>{m.onload=()=>r(1)});const x=document.createElement("canvas");x.width=e*u,x.height=a*u;const g=x.getContext("2d");if(C.value){const r=s.getImageData(0,0,e,a);for(let f=0;f<a;f++)for(let w=0;w<e;w++).2126*r.data[(f*e+w)*4]+.7152*r.data[(f*e+w)*4+1]+.0722*r.data[(f*e+w)*4+2]>=c.value?g.drawImage(m,w*u,f*u):g.drawImage(i,w*u,f*u);k.value=x.toDataURL()}else k.value=n.toDataURL();B.value=!1,st(),console.log(Date.now()-t+"ms - Calculation time")}function J(t){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]/255,a=t.data[o+1]/255,n=t.data[o+2]/255,s=.2126*S(e)+.7152*S(a)+.0722*S(n),l=W(s)*2.55;t.data.fill(l,o,o+3)}return t}function S(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function W(t){return t<=216/24389?t*(24389/27):Math.pow(t,1/3)*116-16}function V(t){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114,n=Math.floor((e+Math.random()*255)/2)<c.value?0:255;t.data.fill(n,o,o+3)}return t}function j(t){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114,a=o/4%t.width,n=Math.floor(o/4/t.width),s=(.06711056*a+.00583715*n)%1*52.9829189%1,i=Math.floor((e+s*255)/2)<c.value?0:255;t.data.fill(i,o,o+3)}return t}async function T(t){const o=new Image;o.src="./bluenoise.png",await new Promise(i=>{o.onload=()=>i(1)});const e=o.width,a=o.height,n=document.createElement("canvas");n.width=e,n.height=a;const s=n.getContext("2d",{willReadFrequently:!0});s.drawImage(o,0,0,e,a);const l=s.getImageData(0,0,e,a);for(let i=0;i<t.data.length;i+=4){const m=t.data[i]*.299+t.data[i+1]*.587+t.data[i+2]*.114,x=i/4%t.width,g=Math.floor(i/4/t.width),f=Math.floor((m+l.data[x%e*4*e+g%a*4])/2)<c.value?0:255;t.data.fill(f,i,i+3)}return t}function $(t){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114,a=o/4%t.width,n=Math.floor(o/4/t.width),s=(a/1.324717957244746+n/(1.324717957244746*1.324717957244746))%1,i=Math.floor((e+s*255)/2)<c.value?0:255;t.data.fill(i,o,o+3)}return t}function z(t){for(let o=0;o<t.data.length;o+=4){const e=t.data[o]*.299+t.data[o+1]*.587+t.data[o+2]*.114,a=o/4%t.width,n=Math.floor(o/4/t.width),s=(a/5+n*.6)%1,i=Math.floor((e+s*255)/2)<c.value?0:255;t.data.fill(i,o,o+3)}return t}function K(t){const o=[[0,127],[192,63]];for(let e=0;e<t.data.length;e+=4){const a=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,n=e/4%t.width,s=Math.floor(e/4/t.width),i=Math.floor((a+o[n%2][s%2])/2)<c.value?0:255;t.data.fill(i,e,e+3)}return t}function H(t){const o=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]];for(let e=0;e<t.data.length;e+=4){const a=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,n=e/4%t.width,s=Math.floor(e/4/t.width),i=Math.floor((a+o[n%4][s%4])/2)<c.value?0:255;t.data.fill(i,e,e+3)}return t}function q(t){const o=[[0,32,8,40,2,34,10,42],[48,16,56,24,50,18,58,26],[12,44,4,36,14,46,6,38],[60,28,52,20,62,30,54,22],[3,35,11,43,1,33,9,41],[51,19,59,27,49,17,57,25],[15,47,7,39,13,45,5,37],[63,31,55,23,61,29,53,21]];for(let e=0;e<t.data.length;e+=4){const a=t.data[e]*.299+t.data[e+1]*.587+t.data[e+2]*.114,n=e/4%t.width,s=Math.floor(e/4/t.width),i=Math.floor((a+o[n%8][s%8]*4)/2)<c.value?0:255;t.data.fill(i,e,e+3)}return t}function O(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/16);t.data.fill(s,n,n+3),e[a+1]+=l*7,e[a+o-1]+=l*3,e[a+o]+=l*5,e[a+o+1]+=l}return t}function Q(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/8);t.data.fill(s,n,n+3),e[a+1]+=l,e[a+2]+=l,e[a+o-1]+=l,e[a+o]+=l,e[a+o+1]+=l,e[a+2*o]+=l}return t}function X(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/48);t.data.fill(s,n,n+3),e[a+1]+=l*7,e[a+2]+=l*5,e[a+o-2]+=l*3,e[a+o-1]+=l*5,e[a+o]+=l*7,e[a+o+1]+=l*5,e[a+o+2]+=l*3,e[a+o*2-2]+=l,e[a+o*2-1]+=l*3,e[a+o*2]+=l*5,e[a+o*2+1]+=l*3,e[a+o*2+2]+=l}return t}function Y(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/42);t.data.fill(s,n,n+3),e[a+1]+=l<<3,e[a+2]+=l<<2,e[a+o-2]+=l<<1,e[a+o-1]+=l<<2,e[a+o]+=l<<3,e[a+o+1]+=l<<2,e[a+o+2]+=l<<1,e[a+o*2-2]+=l,e[a+o*2-1]+=l<<1,e[a+o*2]+=l<<2,e[a+o*2+1]+=l<<1,e[a+o*2+2]+=l}return t}function Z(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/32);t.data.fill(s,n,n+3),e[a+1]+=l<<3,e[a+2]+=l<<2,e[a+o-2]+=l<<1,e[a+o-1]+=l<<2,e[a+o]+=l<<3,e[a+o+1]+=l<<2,e[a+o+2]+=l<<1}return t}function tt(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/32);t.data.fill(s,n,n+3),e[a+1]+=l*5,e[a+2]+=l*3,e[a+o-2]+=l<<1,e[a+o-1]+=l<<2,e[a+o]+=l*5,e[a+o+1]+=l<<2,e[a+o+2]+=l<<1,e[a+o*2-1]+=l<<1,e[a+o*2]+=l*3,e[a+o*2+1]+=l<<1}return t}function et(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/16);t.data.fill(s,n,n+3),e[a+1]+=l<<2,e[a+2]+=l*3,e[a+o-2]+=l,e[a+o-1]+=l<<1,e[a+o]+=l*3,e[a+o+1]+=l<<1,e[a+o+2]+=l}return t}function at(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/4);t.data.fill(s,n,n+3),e[a+1]+=l<<1,e[a+o-1]+=l,e[a+o]+=l}return t}function ot(t){const o=t.width,e=new Uint8ClampedArray(t.width*t.height);for(let a=0,n=0;n<t.data.length;a++,n+=4)e[a]=t.data[n]*.299+t.data[n+1]*.587+t.data[n+2]*.114;for(let a=0,n=0;n<t.data.length;a++,n+=4){const s=e[a]<c.value?0:255,l=Math.floor((e[a]-s)/200);t.data.fill(s,n,n+3),e[a+2]+=l<<5,e[a+o-3]+=l*12,e[a+o-1]+=l*26,e[a+o+1]+=l*30,e[a+o+3]+=l<<4,e[a+o*2-2]+=l*12,e[a+o*2]+=l*26,e[a+o*2+2]+=l*12,e[a+o*3-3]+=l*5,e[a+o*3-1]+=l*12,e[a+o*3+1]+=l*12,e[a+o*3+3]+=l*5}return t}async function nt(t){if(t.target.files&&t.target.files[0]){let o=new FileReader;o.readAsDataURL(t.target.files[0]),o.onload=e=>{I=e.target.result,N()}}}async function y(){p.value==="1x1"?(u=1,h.value=8192):p.value==="2x2"?(u=2,h.value=4096):p.value==="4x4"?(u=4,h.value=2048):p.value==="8x8"?(u=8,h.value=1024):p.value==="32x32"?(u=32,h.value=256):(u=16,h.value=512),I&&N()}async function lt(){const t=new Image;t.src="./faviconLoad.ico",await new Promise(e=>{t.onload=()=>e(1)}),U.drawImage(t,0,0,16,16),document.getElementById("favicon").setAttribute("href",b.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}async function st(){const t=new Image;t.src="./favicon.ico",await new Promise(e=>{t.onload=()=>e(1)}),U.drawImage(t,0,0,16,16),document.getElementById("favicon").setAttribute("href",b.toDataURL()),history.replaceState(null,null,window.location.hash=="#1"?"#0":"#1")}return(t,o)=>(A(),R("div",ut,[ht,pt,ft,d("div",vt,[d("div",wt,[xt,D(d("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:o[1]||(o[1]=e=>y())},yt,544),[[G,p.value]]),d("p",mt,"PNG or JPG ("+L(h.value)+"x"+L(h.value)+"px max)",1),d("input",{class:"block w-[90%] text-sm text-gray-400 rounded-lg border cursor-pointer focus:outline-none bg-gray-700 border-gray-600 placeholder-gray-400",type:"file",accept:".png, .jpg",onChange:o[2]||(o[2]=e=>nt(e))},null,32)]),d("div",Dt,[kt,D(d("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>_.value=e),class:"w-[90%] mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:o[4]||(o[4]=e=>y())},It,544),[[G,_.value]]),d("label",_t,"Threshold: "+L(c.value),1),D(d("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>c.value=e),type:"range",min:"0",max:"255",class:"mb-4 w-[90%] h-2 rounded-lg appearance-none cursor-pointer bg-gray-700",onChange:o[6]||(o[6]=e=>y())},null,544),[[dt,c.value]])]),d("div",Bt,[d("div",Mt,[D(d("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>M.value=e),onChange:o[8]||(o[8]=e=>y()),id:"default-checkbox",type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"},null,544),[[P,M.value]]),Ct]),d("div",St,[D(d("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>C.value=e),onChange:o[10]||(o[10]=e=>y()),id:"default-checkbox",type:"checkbox",value:"",class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600"},null,544),[[P,C.value]]),At])])]),B.value?(A(),R("img",Rt)):E("",!0),d("div",Lt,[k.value?(A(),R("img",{key:0,src:k.value,class:"w-[90vw] h-70vh object-contain"},null,8,Ut)):E("",!0)])]))}});export{Et as default};
