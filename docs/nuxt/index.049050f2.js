import{a as N,b as R,r as u,o as j,e as k,f as o,w,v as U,t as _,h as E,i as G}from"./entry.6c0438e0.js";const L={class:"flex justify-center flex-wrap pt-2 flex-col items-center min-w-[300px]"},P=o("p",{class:"text-lg text-gray-300"},"Lamp Display Emulator by KK",-1),S=o("a",{class:"mb-5 text-xs text-blue-400 underline",href:"https://github.com/KK-mp4/Lamp-Display-Emulator#readme",target:"_blank",rel:"noopener noreferrer"},"More info in GitHub",-1),V={class:"flex flex-wrap flex-row justify-center"},K={class:"w-[300px]"},H=o("p",{class:"mb-1 text-sm text-gray-300"},"Lamp texture resolution:",-1),M=G('<option value="1x1">1x1</option><option value="2x2">2x2</option><option value="4x4">4x4</option><option value="8x8">8x8</option><option value="16x16">16x16</option>',5),$=[M],z={class:"mb-1 text-sm text-gray-300"},A={class:"w-[300px]"},O=o("p",{class:"mb-1 text-sm text-gray-300"},"Dithering algorithm:",-1),T=o("option",{value:"None"},"None",-1),F=[T],J={class:"block mb-2 text-sm font-medium text-gray-300"},W={class:"w-full h-full mt-5 flex justify-center",style:{"image-rendering":"pixelated"}},q=["src"],Z=N({__name:"index",setup(Q){R({title:"Generator"});const l=u("16x16"),y=u("");let a=16;const s=u(512);let m;const b=u("None"),c=u(128);async function C(){const i=Date.now(),e=new Image;e.src=m,await new Promise(n=>{e.onload=()=>n(1)});let t=e.width,r=e.height;t>s.value&&(t=s.value),r>s.value&&(r=s.value);const x=document.createElement("canvas");x.width=t,x.height=r;const D=x.getContext("2d");D.drawImage(e,0,0,e.width,e.height);const v=new Image;v.src="./"+l.value+"/redstone_lamp_off.png",await new Promise(n=>{v.onload=()=>n(1)});const f=new Image;f.src="./"+l.value+"/redstone_lamp_on.png",await new Promise(n=>{f.onload=()=>n(1)});const g=document.createElement("canvas");g.width=t*a,g.height=r*a;const I=g.getContext("2d");for(let n=0;n<r;n++)for(let d=0;d<t;d++){const h=D.getImageData(d,n,1,1).data;.2126*h[0]+.7152*h[1]+.0722*h[2]>=c.value?I.drawImage(f,d*a,n*a):I.drawImage(v,d*a,n*a)}y.value=g.toDataURL(),console.log(Date.now()-i+"ms - Calculation time")}async function B(i){if(i.target.files&&i.target.files[0]){let e=new FileReader;e.readAsDataURL(i.target.files[0]),e.onload=t=>{m=t.target.result,C()}}}async function p(){l.value==="1x1"?(a=1,s.value=8192):l.value==="2x2"?(a=2,s.value=4096):l.value==="4x4"?(a=4,s.value=2048):l.value==="8x8"?(a=8,s.value=1024):(a=16,s.value=512),m&&C()}return(i,e)=>(j(),k("div",L,[P,S,o("div",V,[o("div",K,[H,w(o("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),class:"w-64 mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:e[1]||(e[1]=t=>p())},$,544),[[U,l.value]]),o("p",z,"PNG or JPG ("+_(s.value)+"x"+_(s.value)+"px max)",1),o("input",{class:"block text-sm text-gray-400 rounded-lg border cursor-pointer focus:outline-none bg-gray-700 border-gray-600 placeholder-gray-400",type:"file",accept:".png, .jpg",onChange:e[2]||(e[2]=t=>B(t))},null,32)]),o("div",A,[O,w(o("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>b.value=t),class:"w-64 mb-5 rounded-lg border h-7 bg-gray-700 border-gray-600 text-gray-400",onChange:e[4]||(e[4]=t=>p())},F,544),[[U,b.value]]),o("label",J,"Threshold: "+_(c.value),1),w(o("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>c.value=t),type:"range",min:"0",max:"255",class:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-gray-700",onChange:e[6]||(e[6]=t=>p())},null,544),[[E,c.value]])])]),o("div",W,[o("img",{src:y.value,class:"w-[75%]"},null,8,q)])]))}});export{Z as default};
